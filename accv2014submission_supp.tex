% Updated in May 2014 by Hideo Saito
% Updated in March 2012 by Yasuyuki Matsushita
% Updated in April 2002 by Antje Endemann, ...., and in March 2010 by Reinhard Klette
% Based on CVPR 07 and LNCS style, with modifications by DAF, AZ and elle 2008, AA 2010, ACCV 2010

\documentclass[runningheads]{llncs}
\usepackage{graphicx}
\usepackage{amsmath,amssymb} % define this before the line numbering.
\usepackage{ruler}
\usepackage{color}

\usepackage{epstopdf}
\usepackage{times}
\usepackage{epsfig}
\usepackage{graphicx}
\usepackage{url}
\usepackage{bm}

%===========================================================
\begin{document}
\pagestyle{headings}
\mainmatter


\def\ACCV14SubNumber{215}  % Insert your submission number here

%===========================================================
\title{Clouds in The Cloud:\\
Supplementary Material}
\titlerunning{ACCV-14 submission ID \ACCV14SubNumber - Supplementary Material}
\authorrunning{ACCV-14 submission ID \ACCV14SubNumber - Supplementary Material}

\author{Anonymous ACCV 2014 submission}
\institute{Paper ID \ACCV14SubNumber}

\maketitle
\begin{abstract}
In the submitted paper we describe simulations and an appearance consistency measure that we used. The essence is in the paper, while in this supplemental documet we give more details and results.

\end{abstract}

%===========================================================
\section{Simulations}

In section 8 of the main paper we describe simulations, which enabled us to quantitatively assess performance of 3D cloud recovery. Here we give more details.

An atmosphere over $8{\rm km}\times 8{\rm km}$  was produced using off-the-shelf UCLA large eddy simulation (LES)~\cite{stevens_evaluation_2005}. It created a field of liquid water content (LWC) per voxel, which represented clouds between heights of $500{\rm m}$ to $1500{\rm m}$. Fig.~\ref{fig:simulation_imgs2}(a) shows a $2.5\times 2.5\times 1.5{\rm km}^3$ subset of this atmosphere.
\begin{figure}
  \begin{center}
    \includegraphics{figures/clouds3d_SHDOM}
    \caption{(a) The water liquid content distribution, showing clouds in the atmosphere.
     This is a major input to SHDOM calculations. (b)
      Reconstructed clouds.}
    \label{fig:simulation_imgs2}
  \end{center}
\end{figure}
The LWC field then affected radiative transfer, calculated using the discrete ordinate spherical-harmonic method (SHDOM)~\cite{Evans1998}. The solar zenith angle was set to $\frac{\pi}{4}$.

Figs.~\ref{fig:simulation_imgs1}(a,b) show images from two out of 100
synthesized cameras. The atmosphere above cameras is marked by red rectangles in Figs.~\ref{fig:simulation_imgs1}(a,b)). The applied static Sun-blocker is tailored to solar trajectories in Copenhagen (unrelated to the anonymous authors) latitude. Figs.~\ref{fig:simulation_imgs1}(c,d) show images using the simulated Sun-blocker.
We reconstructed the cloud distribution in the atmosphere above cameras. Fig.~\ref{fig:simulation_imgs2}(b) shows one reconstruction result, as described in the main (submitted) paper.
\begin{figure}
  \begin{center}
    \includegraphics{figures/simulation_imgs}
    \caption{Images synthesised using SHDOM and used in the
      reconstruction algorithm: (a,b) Two images (out of 100) of the
      same scene from different cameras. The red-marked rectangles define
      a region of interest, right above the network. (c,d) The
      same images, taken under a static sun-blocker.}
    \label{fig:simulation_imgs1}
  \end{center}
\end{figure}


\section{Appearance Consistency Score}
\label{sec:appearancecore}

Basic space carving is usually based on pointwise photo-consistency. As we explain in Sec.~8 of the submitted main paper, sometimes in clouds photo-consistency is not sufficiently discriminative. Dense SIFT~\cite{DenseSift2011} can be effective for non-rigid image matching. Similarly, dense SIFT can be incorporated into a space-carving scheme, to represent structural appearance of a projected voxel. SIFT is robust to scale and view-angle variations.
Voxel $k$ projects to a subset of the rays $\rho_k\subset{\cal R}$,
that reach $\nu_k$ viewpoints. 
For each of the rays $r\in\rho_k$ at time $t$, we sample the 3 RGB values. Moreover, each ray $r$ corresponds to a pixel ${\bf x}$. From an $8 \times 8$ patch around ${\bf x}$, a 
128-bin SIFT descriptor is extracted.
The resulting feature vector ${\bf v}(r,t)$ is a weighted concatenation of the RGB values and the 128-bin SIFT vector.

Appearance-consistency is measured by a simple sum of variances in the different components of the feature vectors:
\begin{equation}
 P_k= \exp\left(
         -\Sigma_q\{VAR[{\cal V}_q(k,t)]\}/\sigma^2
         \right)
  \;,
 \label{eq:Dist}
\end{equation}
where $q=\{1..131\}$ and $\sigma^2$ is a global scale parameter.



%===========================================================
\bibliographystyle{splncs}
\bibliography{cloudsbib}

%this would normally be the end of your paper, but you may also have an appendix
%within the given limit of number of pages
\end{document}
